line-length = 120
target-version = "py313"
src = ["src"]

[lint]
# Select low-risk, high-value linting rules
select = [
    "F",    # Pyflakes - catch undefined names, unused imports, etc.
    "E",    # pycodestyle errors - PEP 8 violations
    "W",    # pycodestyle warnings
    "I",    # isort - import sorting
    "N",    # pep8-naming - naming conventions
    "UP",   # pyupgrade - modernize Python code
    "B",    # flake8-bugbear - find likely bugs
    "A",    # flake8-builtins - avoid shadowing builtins
    "C4",   # flake8-comprehensions - improve comprehensions
    "DTZ",  # flake8-datetimez - require timezone-aware datetimes
    "T10",  # flake8-debugger - no debugger statements
    "ISC",  # flake8-implicit-str-concat - string literal concatenation
    "ICN",  # flake8-import-conventions - standard import aliases
    "PIE",  # flake8-pie - misc lints
    "T20",  # flake8-print - no print statements (use logging)
    "PT",   # flake8-pytest-style - pytest best practices
    "Q",    # flake8-quotes - consistent quote style
    "RSE",  # flake8-raise - improve exception raising
    "RET",  # flake8-return - improve return statements
    "SIM",  # flake8-simplify - simplify code
    "TID",  # flake8-tidy-imports - tidy imports
    "ARG",  # flake8-unused-arguments - find unused arguments
    "PTH",  # flake8-use-pathlib - prefer pathlib
    "PGH",  # pygrep-hooks - misc patterns
    "PL",   # Pylint - comprehensive linting
    "RUF",  # Ruff-specific rules
]

# Ignore rules that are too noisy or require major refactoring
ignore = [
    "E501",   # Line too long (handled by formatter)
    "PLR0913", # Too many arguments
    "PLR0912", # Too many branches
    "PLR0915", # Too many statements
    "PLR2004", # Magic value used in comparison
    "PLC0414", # Useless import alias
    "T201",   # print() found (we use both print and logging)
    "T203",   # pprint() found
    "B008",   # Do not perform function call in argument defaults
    "B905",   # zip without explicit strict parameter
    "N802",   # Function name should be lowercase
    "N803",   # Argument name should be lowercase
    "N806",   # Variable in function should be lowercase
    "SIM108", # Use ternary operator (not always clearer)
    "SIM105", # Use contextlib.suppress (not always clearer)
    "ARG001", # Unused function argument (often intentional)
    "ARG002", # Unused method argument
    "PTH123", # open() should be replaced with Path.open()
    "RET504", # Unnecessary assignment before return
    "RET505", # Unnecessary else after return
    "RET506", # Unnecessary else after raise
]

# Allow autofix for safe rules
fixable = ["I", "F401", "UP", "C4", "PIE", "Q", "SIM", "RUF"]
unfixable = []

# Per-file ignores
[lint.per-file-ignores]
"__init__.py" = ["F401"]  # Unused imports in __init__.py are often intentional
"tests/**" = ["ARG", "PLR2004", "T201"]  # More lenient for tests
"scripts/**" = ["T201", "T203"]  # Allow print in scripts

[lint.isort]
known-first-party = ["src"]
force-single-line = false
lines-after-imports = 2

[lint.pylint]
max-args = 10  # More lenient than default 5
max-branches = 15  # More lenient than default 12
max-statements = 60  # More lenient than default 50
