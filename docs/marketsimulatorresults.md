# Market Simulator Experiments

## 2025-10-24 Stub Baseline

- Command: python tools/run_with_metrics.py --log runs/stub_stub.log --summary runs/stub_stub.json -- --stub-config --steps 5
- Log: runs/stub_stub.log
- Summary: runs/stub_stub.json
- Return: 0.0125
- Sharpe: 1.05
- PnL: 1250.00
- Closing balance: 101250.00
- Notes: Stub-mode run for instrumentation regression.


_Generated by tools/summarize_results.py_

## run1.log
- **Log path**: `run1.log`
- **Last modified**: 2025-10-24T05:56:59.079563
- **Metrics**:
  - `return`: 0.018000
  - `sharpe`: -0.020000
  - `pnl`: null
  - `balance`: null

## 2025-10-29 Sim Seed Run

- Command: `TRADE_STATE_SUFFIX=sim python marketsimulator/run_trade_loop.py --symbols AAPL MSFT NVDA BTCUSD ETHUSD --steps 1 --step-size 1 --initial-cash 100000`
- Data: seeded `data/_simulator/*.csv` from `trainingdata` snapshots (historical equities + crypto OHLC).
- Forecast coverage: 2 / 5 symbols written (BTCUSD, ETHUSD). Equities produced predictions but were blocked pre-trade by `trade_stock_e2e` due to low dollar volume and negative walk-forward Sharpe (e.g. AAPL Sharpe -8.74 with 12.7 bps edge < 16 bps gate; MSFT no directional agreement; NVDA sell setup flipped sign).
- Metrics: return 0.0000, Sharpe 0.0000, PnL \$0.00, balance \$100,000.00, max drawdown \$0 (0.00%), fees \$0.00.
- Strategy analysis: crypto strategies skipped because `ci_guard` flags keep sell disabled; equities hit drawdown/edge guards. Average per-day stats — forecasts 2.0, symbols analyzed 2.0, blocked candidates 2.0 (sim-summary JSON).
- Follow-ups: expand `_simulator` equities feed to include intraday files or relax mock dollar-volume floor; review `crypto_sell_disabled` toggles for simulation contexts; consider lowering walk-forward Sharpe cutoff during synthetic reruns to unlock trades for regression testing.

## 2025-10-29 Sim Fast Mode

- Command: `TRADE_STATE_SUFFIX=sim python marketsimulator/run_trade_loop.py --symbols AAPL MSFT NVDA BTCUSD ETHUSD --steps 1 --step-size 1 --initial-cash 100000 --fast-sim`
- Settings: `--fast-sim` forces `FAST_TESTING=1`, `MARKETSIM_BACKTEST_SIMULATIONS=24`, `MARKETSIM_SWEEP_POINTS=101`, and `MARKETSIM_KRONOS_SAMPLE_COUNT=64`. The new sweep/backtest knobs cut runtime from ~22 min (seed run) to ~8.6 min while still exercising the real forecasting/backtest stack.
- Metrics: return 0.0000, Sharpe 0.0000, PnL \$0.00 (no trades). Strategy gating unchanged—equities rejected on Sharpe/edge checks, crypto sell path disabled.
- Notes: Kronos override confirmed via logs; TOT stayed in fast testing mode with bf16 weights. `sim-summary` shows only crypto forecasts recorded, so unlocking equity entries (or expanding the seeded dataset) is the next lever now that the loop iterates quickly.
